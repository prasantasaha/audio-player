(this["webpackJsonpaudio-player"]=this["webpackJsonpaudio-player"]||[]).push([[0],{124:function(e,n,t){"use strict";t.r(n);var r,a,i,c,o,u,l,d,s,f,b,j,p,x,h,O,g,v=t(0),m=t(25),w=t(146),y=t(76),C=t(14),k=t.n(C),S=t(22),E=t(8),R=function(){var e=Object(S.a)(k.a.mark((function e(){var n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://player-b7f2.restdb.io/rest/air-channels",{headers:{"x-apikey":"6189adf1fc71545b0f5e060a"}});case 2:return e.next=4,e.sent.json();case 4:return n=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),z=function(e,n){return!(!e||!n)&&e.toString()===n.toString()},P=function(){for(var e=[500,640],n=[window.outerWidth,window.outerHeight],t=n,r=0;r<t.length;r++)t[r]=e[r]>n[r]?e[r]:n[r];window.resizeTo(t[0],t[1])},L=t(3),I=Object(v.createContext)({channels:[],favouriteChannels:void 0,currentChannel:null,isPlaying:!1,updateCurrentChannel:function(e){},togglePlayBack:function(){},nextChannel:function(){},prevChannel:function(){},toggleFavouriteChannel:function(e){}}),T=function(e){var n=e.children,t=window.location.search,r=new URLSearchParams(t).get("channelId"),a=Object(v.useState)(null),i=Object(E.a)(a,2),c=i[0],o=i[1],u=Object(v.useState)(!1),l=Object(E.a)(u,2),d=l[0],s=l[1],f=Object(v.useState)([]),b=Object(E.a)(f,2),j=b[0],p=b[1],x=Object(v.useState)(),h=Object(E.a)(x,2),O=h[0],g=h[1],m="favouriteChannels",w="currentChannel";Object(v.useEffect)((function(){C()}),[]);var C=function(){var e=Object(S.a)(k.a.mark((function e(){var n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=p,e.next=3,R();case 3:e.t1=e.sent,(0,e.t0)(e.t1),(n=localStorage.getItem(m))&&g(JSON.parse(n));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=Object(v.useCallback)((function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=j.find((function(n){return z(n.id,e)}));t&&o(t),n&&!d&&s(!0)}),[j,d]),T=Object(v.useCallback)((function(){return j.findIndex((function(e){return c&&z(e.id,c.id)}))}),[j,c]);Object(v.useEffect)((function(){if(j&&j.length)if(r)P(r,!1);else{var e=localStorage.getItem(w);if(e)try{o(JSON.parse(e))}catch(n){console.log({error:n})}}}),[j,r,P]),Object(v.useEffect)((function(){c&&localStorage.setItem(w,JSON.stringify(c))}),[c]),Object(v.useEffect)((function(){O&&localStorage.setItem(m,JSON.stringify(O))}),[O]);var A=Object(v.useCallback)((function(){var e=T();e<j.length-1?o(j[e+1]):o(j[0])}),[j,T]),F=Object(v.useCallback)((function(){var e=T();o(e>=1?j[e-1]:j[j.length-1])}),[j,T]);return Object(L.jsx)(I.Provider,{value:{channels:j,favouriteChannels:O,currentChannel:c,isPlaying:d,updateCurrentChannel:P,togglePlayBack:function(){s((function(e){return!e}))},nextChannel:A,prevChannel:F,toggleFavouriteChannel:function(e){if(O&&O.find((function(n){return z(n.id,e.id)})))return void g((function(n){return null===n||void 0===n?void 0:n.filter((function(n){return!z(n.id,e.id)}))}));g((function(n){return n||(n=[]),[].concat(Object(y.a)(n),[e])}))}},children:n})},A=function(){return Object(v.useContext)(I)},F=t(7),M=t(149),B=t(150),J=t(151),N=t(148),U=t(136),D=t(1),_=D.default.div(r||(r=Object(F.a)(["\n    position: sticky;\n    top: 0;\n    z-index: 3;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    background-color: #fff;\n    background-color: var(--bg-primary-color);\n    filter: drop-shadow(0 0 0.2rem black);\n"]))),W=D.default.div(a||(a=Object(F.a)(["\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    justify-content: space-between;\n    padding: 0 20px;\n    height: 72px;\n    border-bottom: 1px solid grey;\n    background-color: rgba(64, 64, 64, 0.8);\n    align-items: center;\n"]))),H=D.default.img(i||(i=Object(F.a)(["\n    border-radius: 50%;\n    width: 48px;\n    ::before {\n        content: '';\n        width: 48px;\n        height: 48px;\n        background-color: #ccc;\n        border-radius: 50%;\n        position: absolute;\n        top: 50%;\n        left: 24px;\n        transform: translateY(-50%);\n    }\n"]))),Y=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e.filter((function(e){return e.title.toLowerCase().indexOf(n.toLowerCase())>=0})).map((function(e,n,t){return{label:Object(L.jsxs)(M.a,{direction:"row",align:"center",gap:"small",border:n<t.length-1?"bottom":void 0,pad:"small",children:[Object(L.jsx)(B.a,{width:"80px",src:e.imageSrc,style:{borderRadius:"8px"}}),Object(L.jsx)(J.a,{size:"small",children:null===e||void 0===e?void 0:e.title})]}),value:e.title,channel:e}}))},K=function(){var e=A(),n=e.channels,t=e.updateCurrentChannel,r=Object(v.useState)(),a=Object(E.a)(r,2),i=a[0],c=a[1],o=Object(v.useState)(!1),u=Object(E.a)(o,2),l=u[0],d=u[1],s=Object(v.useState)([]),f=Object(E.a)(s,2),b=f[0],j=f[1],p=Object(v.useState)(""),x=Object(E.a)(p,2),h=x[0],O=x[1];Object(v.useEffect)((function(){i&&i.id&&t(i.id)}),[i,t]);var g=Object(v.useCallback)((function(e){var t=e.target.value;O(t),c(t),t.trim()?j(Y(n,t)):j([])}),[n]),m=Object(v.useCallback)((function(e){c(e.suggestion.channel),O(e.suggestion.value)}),[]),w=Object(v.useCallback)((function(){j(Y(n,null===i||void 0===i?void 0:i.title)),d(!0)}),[n,i]),y=Object(v.useCallback)((function(){j([]),d(!1),c(void 0),O("")}),[]);return Object(L.jsx)(_,{children:Object(L.jsxs)(W,{children:[Object(L.jsx)(H,{src:"/audio-player/assets/icons/icon-x192.png",alt:"Logo"}),Object(L.jsx)(M.a,{width:"medium",gap:"medium",direction:"row",align:"center",elevation:l?"medium":void 0,style:l?{borderBottomLeftRadius:"0px",borderBottomRightRadius:"0px"}:void 0,pad:{left:"large"},children:Object(L.jsx)(N.a,{icon:Object(L.jsx)(U.a,{}),reverse:!0,placeholder:"search",suggestions:b,value:h,onChange:g,onSuggestionsOpen:w,onSuggestionsClose:y,onSuggestionSelect:m})})]})})},q=t(74),G=t(12),Q=Object(G.deepMerge)(q.dark,{global:{drop:{background:"#444444",shadowSize:"medium",extend:"\n          border-bottom-left-radius: 12px;\n          border-bottom-right-radius: 12px;\n          overflow: hidden;\n        "},elevation:{dark:{medium:"0 10px 20px rgba(0,0,0,0.19), 0 6px 6px rgba(0,0,0,0.23)"},light:{medium:"0 10px 20px rgba(0,0,0,0.19), 0 6px 6px rgba(0,0,0,0.23)"}},font:{size:"14px",family:"Sora"},input:{weight:400}}}),V=t(155),X=t(58),Z=D.default.div(c||(c=Object(F.a)([""]))),$=D.default.div(o||(o=Object(F.a)(["\n    margin: 12px 20px;\n"]))),ee=D.default.div(u||(u=Object(F.a)(["\n    display: flex;\n    flex-flow: row wrap;\n    justify-content: center;\n    gap: 18px;\n    padding: 10px;\n    max-width: 800px;\n"]))),ne=D.default.div.attrs((function(e){return{style:{backgroundImage:"url(".concat(e.image,")")}}}))(l||(l=Object(F.a)(["\n    border-radius: 8px;\n    overflow: hidden;\n    position: relative;\n    display: flex;\n    cursor: pointer;\n    background-repeat: no-repeat;\n    background-size: contain;\n    background-position: center;\n    width: 160px;\n    height: 160px;\n    border: 0.2px solid white;\n    background-color: white;\n    filter: drop-shadow(0 0 0.15rem white);\n\n    :hover {\n        opacity: 0.8;\n        cursor: pointer;\n    }\n"]))),te=function(e){var n=A().updateCurrentChannel;return Object(L.jsx)(ne,{image:e.imageSrc,onClick:function(){n(e.id)}})},re=function(){var e=A(),n=e.channels,t=e.favouriteChannels;return Object(L.jsxs)(Z,{children:[t&&t.length&&Object(L.jsxs)(v.Fragment,{children:[Object(L.jsx)($,{children:"Your favourite Stations"}),Object(L.jsx)(ee,{children:t.map((function(e){return Object(L.jsx)(te,Object(X.a)({},e),e.id)}))})]}),Object(L.jsx)($,{children:"On-Air Stations"}),Object(L.jsx)(ee,{children:n.map((function(e){return Object(L.jsx)(te,Object(X.a)({},e),e.id)}))})]})},ae=t(145),ie=t(144),ce=t(15),oe=t.n(ce),ue=t(137),le=t(75),de=D.default.div(d||(d=Object(F.a)(["\n    display: flex;\n    justify-content: ",";\n    align-items: center;\n    font-size: 16px;\n    gap: ",";\n    padding: ",";\n    width: ",";\n    flex-direction: ",";\n    cursor: pointer;\n"])),(function(e){return e.expanded?"center":"left"}),(function(e){return e.expanded?"50px":"10px"}),(function(e){return e.expanded?"10px":void 0}),(function(e){return e.expanded?"100%":void 0}),(function(e){return e.expanded?"column":"row"})),se=Object(D.default)(M.a)(s||(s=Object(F.a)(["\n    flex-direction: row;\n    justify-content: center;\n    align-items: center;\n    gap: 20px;\n    width ",";\n    padding: 0 15px\n"])),(function(e){return e.expanded?"100%":void 0})),fe=D.default.div(f||(f=Object(F.a)(["\n    position: relative;\n    width: ",";\n    max-height: 50vh;\n    max-width: ",";\n"])),(function(e){return e.expanded?"50vh":"60px"}),(function(e){return e.expanded?"50vh":"60px"})),be=D.default.img(b||(b=Object(F.a)(["\n    transition: max-width 0.15s ease-in-out;\n    border-radius: 6px;\n    width: 100%;\n    height: 100%;\n"]))),je=Object(D.default)(ae.a)(j||(j=Object(F.a)(["\n    padding: ",";\n"])),(function(e){return"large"===e.size?"18px":"12px"})),pe=D.default.div(p||(p=Object(F.a)(["\n    position: absolute;\n    top: 0;\n    background-color: rgba(0, 0, 0, 0.2);\n    width: 100%;\n    height: 100%;\n    justify-content: center;\n    align-items: center;\n    display: flex;\n"]))),xe=function(e){var n=e.isExpanded,t=e.isLoading,r=e.hasError,a=e.currentChannel,i=e.onClick,c=Object(v.useState)(!1),o=Object(E.a)(c,2),u=o[0],l=o[1];Object(v.useEffect)((function(){l(n)}),[n]);return Object(L.jsxs)(de,{expanded:u,onClick:function(){l(!0),i(!0)},children:[Object(L.jsx)(se,{expanded:u,children:Object(L.jsxs)(fe,{expanded:u,children:[(null===a||void 0===a?void 0:a.imageSrc)&&Object(L.jsx)(be,{src:a.imageSrc,alt:"Media art"}),t&&!r&&Object(L.jsx)(pe,{children:Object(L.jsx)(V.a,{size:u?"large":"medium",color:"white"})}),r&&Object(L.jsx)(pe,{children:Object(L.jsx)(ue.a,{size:u?"xlarge":"medium",color:"yellow"})})]})}),Object(L.jsx)(le.Text,{size:u?"xlarge":"small",textAlign:"start",children:null===a||void 0===a?void 0:a.title})]})},he=t(138),Oe=t(139),ge=t(140),ve=t(141),me=D.default.div(x||(x=Object(F.a)(["\n    display: flex;\n    align-items: center;\n    gap: ",";\n"])),(function(e){return e.expanded?"30px":0})),we=function(e){var n=e.expanded,t=A(),r=t.currentChannel,a=t.isPlaying,i=t.togglePlayBack,c=t.nextChannel,o=t.prevChannel;return r?Object(L.jsxs)(me,{expanded:n,children:[Object(L.jsx)(ae.a,{icon:Object(L.jsx)(he.a,{}),onClick:function(){return o()}}),Object(L.jsx)(je,{icon:a?Object(L.jsx)(Oe.a,{}):Object(L.jsx)(ge.a,{}),onClick:function(){return i()},plain:!1,size:n?"large":void 0}),Object(L.jsx)(ae.a,{icon:Object(L.jsx)(ve.a,{}),onClick:function(){return c()}})]}):Object(L.jsx)(v.Fragment,{})},ye=t(142),Ce=t(143),ke=Object(D.default)(M.a)(h||(h=Object(F.a)(["\n    flex-direction: row;\n    align-items: center;\n    gap: 20px;\n"]))),Se=function(e){var n=e.currentChannel,t=e.expanded,r=Object(v.useState)(!1),a=Object(E.a)(r,2),i=a[0],c=a[1],o=A(),u=o.favouriteChannels,l=o.toggleFavouriteChannel;Object(v.useEffect)((function(){if((null===n||void 0===n?void 0:n.id)&&u){var e=u.find((function(e){return z(e.id,n.id)}));e&&e.id?c(!0):c(!1)}}),[u,n]);var d=function(){var e=Object(S.a)(k.a.mark((function e(){var t;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n&&n.id){e.next=2;break}return e.abrupt("return");case 2:if(!navigator.share){e.next=13;break}return(t=new URLSearchParams).set("channelId",n.id),e.prev=5,e.next=8,navigator.share({title:n.title,text:"Check out this online radio channel",url:"".concat(window.location.href.replace(window.location.search,""),"?").concat(t.toString())});case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(5),console.log("Unable to share ".concat(e.t0));case 13:case"end":return e.stop()}}),e,null,[[5,10]])})));return function(){return e.apply(this,arguments)}}();return Object(L.jsxs)(ke,{children:[t&&Object(L.jsx)(je,{icon:Object(L.jsx)(ye.a,{}),primary:i,onClick:function(){l(n)}}),Object(L.jsx)(we,{expanded:t}),t&&Object(L.jsx)(je,{icon:Object(L.jsx)(Ce.a,{}),onClick:d})]})},Ee=D.default.div(O||(O=Object(F.a)(["\n    position: fixed;\n    left: 0;\n    bottom: 0;\n    width: 100%;\n    background-color: rgba(\n        64,\n        64,\n        64,\n        ","%\n    );\n    color: white;\n    text-align: center;\n    display: flex;\n    align-items: center;\n    padding: ",";\n    flex-direction: ",";\n    justify-content: ",";\n    box-sizing: border-box;\n    filter: drop-shadow(0 0 0.2rem black);\n    height: ",";\n    transition: height 0.15s ease-in;\n    z-index: 100;\n"])),(function(e){return e.expanded?100:80}),(function(e){return e.expanded?"20px 0":0}),(function(e){return e.expanded?"column":"row"}),(function(e){return e.expanded?"space-around":"space-between"}),(function(e){return e.expanded?"100%":"80px"})),Re=function(e){var n=window.location.search,t=new URLSearchParams(n).get("channelId"),r=Object(v.useState)(!1),a=Object(E.a)(r,2),i=a[0],c=a[1],o=Object(v.useState)(!1),u=Object(E.a)(o,2),l=u[0],d=u[1],s=A(),f=s.currentChannel,b=s.isPlaying,j=Object(v.useState)(!1),p=Object(E.a)(j,2),x=p[0],h=p[1],O=Object(v.useRef)(null),g=Object(v.useCallback)((function(n){var t=new oe.a({enableWorker:!0});return null!=O.current&&t.attachMedia(O.current),t.on(oe.a.Events.MEDIA_ATTACHED,(function(){d(!1),c(!0),t.loadSource(n),t.on(oe.a.Events.MANIFEST_PARSED,(function(){var n;(c(!1),e.autoPlay)&&(null===O||void 0===O||null===(n=O.current)||void 0===n||n.play().catch((function(){return console.log("Unable to autoplay prior to user interaction with the dom.")})))}))})),t.on(oe.a.Events.ERROR,(function(e,n){if(d(!0),n.fatal)switch(n.type){case ce.ErrorTypes.NETWORK_ERROR:t.stopLoad();break;case ce.ErrorTypes.MEDIA_ERROR:t.recoverMediaError()}})),t}),[e.autoPlay]);return Object(v.useEffect)((function(){var e;return oe.a.isSupported()&&(null===f||void 0===f?void 0:f.audioSrc)&&(e=g(null===f||void 0===f?void 0:f.audioSrc),document.title="Radio - ".concat(f.title)),function(){null!=e&&e.destroy()}}),[g,f]),Object(v.useEffect)((function(){f&&z(f.id,t)&&h(!0)}),[f,t]),Object(v.useEffect)((function(){var e;b?setTimeout((function(){var e;(null===(e=O.current)||void 0===e?void 0:e.paused)&&!i&&(null===O||void 0===O||O.current.play())}),0):null===(e=O.current)||void 0===e||e.pause()}),[b,i]),(null===f||void 0===f?void 0:f.audioSrc)?Object(L.jsxs)(Ee,{expanded:x,children:[oe.a.isSupported()?Object(L.jsx)("audio",{ref:O}):Object(L.jsx)("audio",{ref:O,src:null===f||void 0===f?void 0:f.audioSrc,autoPlay:e.autoPlay}),x&&Object(L.jsx)(ae.a,{icon:Object(L.jsx)(ie.a,{size:"large"}),onClick:function(){return h(!1)}}),Object(L.jsx)(xe,{hasError:l,isExpanded:x,isLoading:i,currentChannel:f,onClick:function(e){h(e)}}),Object(L.jsx)(Se,{currentChannel:f,expanded:x})]}):Object(L.jsx)(v.Fragment,{})},ze=D.default.div(g||(g=Object(F.a)(["\n    min-height: 100%;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    margin-bottom: 80px;\n"]))),Pe=function(){var e=A(),n=e.channels,t=e.isPlaying,r=Object(v.useState)(!1),a=Object(E.a)(r,2),i=a[0],c=a[1];return Object(v.useEffect)((function(){t&&!i&&c(!0)}),[i,t]),Object(L.jsx)(ze,{children:n&&n.length?Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(re,{}),Object(L.jsx)(Re,{autoPlay:i})]}):Object(L.jsx)(V.a,{size:"large"})})},Le=function(){return Object(v.useEffect)((function(){return window.addEventListener("resize",P),window.addEventListener("load",P),function(){window.removeEventListener("resize",P),window.removeEventListener("load",P)}}),[]),Object(L.jsx)(w.a,{full:!0,theme:Q,children:Object(L.jsxs)(T,{children:[Object(L.jsx)(K,{}),Object(L.jsx)(Pe,{})]})})};Object(m.render)(Object(L.jsx)(Le,{}),document.getElementById("root"))}},[[124,1,2]]]);
//# sourceMappingURL=main.086fed35.chunk.js.map