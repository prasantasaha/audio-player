(this["webpackJsonpaudio-player"]=this["webpackJsonpaudio-player"]||[]).push([[0],{129:function(e,n,t){"use strict";t.r(n);var r,a,c,i,o,u,l,s,d,b,j=t(0),f=t(23),p=t(148),x=t(20),h=t.n(x),O=t(34),g=t(10),v=function(){var e=Object(O.a)(h.a.mark((function e(){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://player-b7f2.restdb.io/rest/air-channels",{headers:{"x-apikey":"612c3e3f43cedb6d1f97ea9f"}});case 2:return e.next=4,e.sent.json();case 4:return n=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=t(3),y=Object(j.createContext)({channels:[],currentChannel:null,isPlaying:!1,updateCurrentChannel:function(e){},togglePlayBack:function(){},nextChannel:function(){},prevChannel:function(){}}),w=function(e){var n=e.children,t=window.location.search,r=new URLSearchParams(t).get("channelId"),a=Object(j.useState)(null),c=Object(g.a)(a,2),i=c[0],o=c[1],u=Object(j.useState)(!1),l=Object(g.a)(u,2),s=l[0],d=l[1],b=Object(j.useState)([]),f=Object(g.a)(b,2),p=f[0],x=f[1];Object(j.useEffect)((function(){w()}),[]);var w=function(){var e=Object(O.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=x,e.next=3,v();case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=Object(j.useCallback)((function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=p.find((function(n){return n.id===e}));t&&o(t),n&&!s&&d(!0)}),[p,s]),C=Object(j.useCallback)((function(){return p.findIndex((function(e){return i&&e.id===i.id}))}),[p,i]);Object(j.useEffect)((function(){if(p&&p.length)if(r)k(r,!1);else{var e=sessionStorage.getItem("currentChannel");if(e)try{o(JSON.parse(e))}catch(n){console.log({error:n})}}}),[p,r,k]),Object(j.useEffect)((function(){i&&sessionStorage.setItem("currentChannel",JSON.stringify(i))}),[i]);var S=Object(j.useCallback)((function(){var e=C();e<p.length-1?o(p[e+1]):o(p[0])}),[p,C]),E=Object(j.useCallback)((function(){var e=C();o(e>=1?p[e-1]:p[p.length-1])}),[p,C]);return Object(m.jsx)(y.Provider,{value:{channels:p,currentChannel:i,isPlaying:s,updateCurrentChannel:k,togglePlayBack:function(){d((function(e){return!e}))},nextChannel:S,prevChannel:E},children:n})},k=function(){return Object(j.useContext)(y)},C=t(9),S=t(156),E=t(1),R=t(78),P=E.default.div(r||(r=Object(C.a)([""]))),I=E.default.div(a||(a=Object(C.a)(["\n  margin: 12px 20px;\n"]))),z=E.default.div(c||(c=Object(C.a)(["\n  display: flex;\n  flex-flow: row wrap;\n  justify-content: center;\n  gap: 18px;\n  padding: 10px;\n  max-width: 800px;\n"]))),A=E.default.div.attrs((function(e){return{style:{backgroundImage:"url(".concat(e.image,")")}}}))(i||(i=Object(C.a)(["\n  border-radius: 8px;\n  overflow: hidden;\n  position: relative;\n  display: flex;\n  cursor: pointer;\n  background-repeat: no-repeat;\n  background-size: contain;\n  background-position: center;\n  width: 160px;\n  height: 160px;\n  border: 0.2px solid white;\n  background-color: white;\n  filter: drop-shadow(0 0 0.15rem white);\n\n  :hover {\n    opacity: 0.8;\n    cursor: pointer;\n  }\n"]))),T=function(e){var n=k().updateCurrentChannel;return Object(m.jsx)(A,{image:e.imageSrc,onClick:function(){n(e.id)}})},B=function(){var e=k().channels;return Object(m.jsxs)(P,{children:[Object(m.jsx)(I,{children:"On-Air Stations"}),Object(m.jsx)(z,{children:e.map((function(e){return Object(m.jsx)(T,Object(R.a)({},e),e.id)}))})]})},D=t(147),L=t(71),M=t(72),F=t(14),J=t.n(F),N=t(140),_=t(141),U=t(142),W=t(143),H=E.default.div(o||(o=Object(C.a)(["\n  display: flex;\n  align-items: center;\n"]))),K=function(){var e=k(),n=e.currentChannel,t=e.isPlaying,r=e.togglePlayBack,a=e.nextChannel,c=e.prevChannel;return n?Object(m.jsxs)(H,{children:[Object(m.jsx)(D.a,{icon:Object(m.jsx)(N.a,{}),onClick:function(){return c()}}),Object(m.jsx)(D.a,{icon:t?Object(m.jsx)(_.a,{}):Object(m.jsx)(U.a,{}),onClick:function(){return r()},plain:!1,size:"large"}),Object(m.jsx)(D.a,{icon:Object(m.jsx)(W.a,{}),onClick:function(){return a()}})]}):Object(m.jsx)(j.Fragment,{})},q=t(144),G=E.default.div(u||(u=Object(C.a)(["\n  position: fixed;\n  left: 0;\n  bottom: 0;\n  width: 100%;\n  background-color: #404040;\n  color: white;\n  text-align: center;\n  display: flex;\n  align-items: center;\n  padding:  ",";\n  flex-direction: ",";\n  justify-content: ",";\n  box-sizing: border-box;\n  filter: drop-shadow(0 0 0.20rem black);\n  height: ",";\n"])),(function(e){return e.expanded?"80px 0":"6px 10px"}),(function(e){return e.expanded?"column":"row"}),(function(e){return e.expanded?"space-around":"space-between"}),(function(e){return e.expanded?"100%":void 0})),Q=E.default.div(l||(l=Object(C.a)(["\n  display: flex;\n  align-items: center;\n  font-size: 16px;\n  flex: 1;\n  gap:  ",";\n  padding: ",";\n  width: ",";\n  flex-direction: ",";\n"])),(function(e){return e.expanded?"50px":"10px"}),(function(e){return e.expanded?"50px":void 0}),(function(e){return e.expanded?"100%":void 0}),(function(e){return e.expanded?"column":"row"})),V=function(e){var n=window.location.search,t=new URLSearchParams(n).get("channelId"),r=Object(j.useState)(!1),a=Object(g.a)(r,2),c=a[0],i=a[1],o=Object(j.useState)(!1),u=Object(g.a)(o,2),l=u[0],s=u[1],d=k(),b=d.currentChannel,f=d.isPlaying,p=Object(j.useState)(!1),x=Object(g.a)(p,2),h=x[0],O=x[1],v=Object(j.useRef)(null),y=Object(j.useCallback)((function(n){var t=new J.a({enableWorker:!0});return null!=v.current&&t.attachMedia(v.current),t.on(J.a.Events.MEDIA_ATTACHED,(function(){s(!1),i(!0),t.loadSource(n),t.on(J.a.Events.MANIFEST_PARSED,(function(){var n;(i(!1),e.autoPlay)&&(null===v||void 0===v||null===(n=v.current)||void 0===n||n.play().catch((function(){return console.log("Unable to autoplay prior to user interaction with the dom.")})))}))})),t.on(J.a.Events.ERROR,(function(e,n){if(s(!0),n.fatal)switch(n.type){case F.ErrorTypes.NETWORK_ERROR:t.stopLoad();break;case F.ErrorTypes.MEDIA_ERROR:t.recoverMediaError()}})),t}),[e.autoPlay]);return Object(j.useEffect)((function(){var e;return J.a.isSupported()&&(null===b||void 0===b?void 0:b.audioSrc)&&(e=y(null===b||void 0===b?void 0:b.audioSrc),document.title="Radio - ".concat(b.title)),function(){null!=e&&e.destroy()}}),[y,b]),Object(j.useEffect)((function(){b&&b.id===t&&O(!0)}),[b,t]),Object(j.useEffect)((function(){var e;f?setTimeout((function(){var e;(null===(e=v.current)||void 0===e?void 0:e.paused)&&!c&&(null===v||void 0===v||v.current.play())}),0):null===(e=v.current)||void 0===e||e.pause()}),[f,c]),(null===b||void 0===b?void 0:b.audioSrc)?Object(m.jsxs)(G,{expanded:h,children:[J.a.isSupported()?Object(m.jsx)("audio",{ref:v}):Object(m.jsx)("audio",{ref:v,src:null===b||void 0===b?void 0:b.audioSrc,autoPlay:e.autoPlay}),h&&Object(m.jsx)(D.a,{icon:Object(m.jsx)(q.a,{size:"large"}),onClick:function(){return O(!1)}}),Object(m.jsxs)(Q,{expanded:h,onClick:function(){O(!0)},children:[(null===b||void 0===b?void 0:b.imageSrc)&&Object(m.jsx)(L.Image,{src:b.imageSrc,width:h?"70%":60,style:{maxHeight:"30vh",maxWidth:"30vh"}}),Object(m.jsx)(M.Text,{size:h?"xlarge":"small",textAlign:"start",children:null===b||void 0===b?void 0:b.title}),c&&!l&&Object(m.jsx)(S.a,{})]}),Object(m.jsx)(K,{})]}):Object(m.jsx)(j.Fragment,{})},X=E.default.div(s||(s=Object(C.a)(["\n  min-height: 100%;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  margin-bottom: 80px;\n"]))),Y=function(){var e=k(),n=e.channels,t=e.isPlaying,r=Object(j.useState)(!1),a=Object(g.a)(r,2),c=a[0],i=a[1];return Object(j.useEffect)((function(){t&&!c&&i(!0)}),[c,t]),Object(m.jsx)(X,{children:n&&n.length?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(B,{}),Object(m.jsx)(V,{autoPlay:c})]}):Object(m.jsx)(S.a,{})})},Z=t(151),$=t(153),ee=t(152),ne=t(150),te=t(146),re=E.default.div(d||(d=Object(C.a)(["\n  position: sticky;\n  top: 0;\n  z-index: 3;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  background-color: #fff;\n  background-color: var(--bg-primary-color);\n  filter: drop-shadow(0 0 0.20rem black);\n"]))),ae=E.default.div(b||(b=Object(C.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  justify-content: space-between;\n  padding: 0 20px;\n  height: 72px;\n  border-bottom: 1px solid #ccc;\n  background-color: black;\n  align-items: center;\n"]))),ce=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e.filter((function(e){return e.title.toLowerCase().indexOf(n.toLowerCase())>=0})).map((function(e,n,t){return{label:Object(m.jsxs)(Z.a,{direction:"row",align:"center",gap:"small",border:n<t.length-1?"bottom":void 0,pad:"small",children:[Object(m.jsx)($.a,{width:"80px",src:e.imageSrc,style:{borderRadius:"8px"}}),Object(m.jsx)(ee.a,{size:"small",children:null===e||void 0===e?void 0:e.title})]}),value:e.title,channel:e}}))},ie=function(){var e=k(),n=e.channels,t=e.updateCurrentChannel,r=Object(j.useState)(),a=Object(g.a)(r,2),c=a[0],i=a[1],o=Object(j.useState)(!1),u=Object(g.a)(o,2),l=u[0],s=u[1],d=Object(j.useState)([]),b=Object(g.a)(d,2),f=b[0],p=b[1],x=Object(j.useState)(""),h=Object(g.a)(x,2),O=h[0],v=h[1];Object(j.useEffect)((function(){c&&c.id&&t(c.id)}),[c,t]);var y=Object(j.useCallback)((function(e){var t=e.target.value;v(t),i(t),t.trim()?p(ce(n,t)):p([])}),[n]),w=Object(j.useCallback)((function(e){i(e.suggestion.channel),v(e.suggestion.value)}),[]),C=Object(j.useCallback)((function(){p(ce(n,null===c||void 0===c?void 0:c.title)),s(!0)}),[n,c]),S=Object(j.useCallback)((function(){p([]),s(!1),i(void 0),v("")}),[]);return Object(m.jsx)(re,{children:Object(m.jsxs)(ae,{children:[Object(m.jsx)("h1",{children:"Radio"}),Object(m.jsx)(Z.a,{width:"medium",gap:"medium",direction:"row",align:"center",elevation:l?"medium":void 0,style:l?{borderBottomLeftRadius:"0px",borderBottomRightRadius:"0px"}:void 0,pad:{left:"large"},children:Object(m.jsx)(ne.a,{icon:Object(m.jsx)(te.a,{}),reverse:!0,placeholder:"search",suggestions:f,value:O,onChange:y,onSuggestionsOpen:C,onSuggestionsClose:S,onSuggestionSelect:w})})]})})},oe=t(75),ue=t(12),le=t(73),se=t(74),de=t(77),be=t(76),je=function(e){Object(de.a)(t,e);var n=Object(be.a)(t);function t(){var e;Object(le.a)(this,t);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=n.call.apply(n,[this].concat(a))).state={hasError:!1},e}return Object(se.a)(t,[{key:"componentDidCatch",value:function(e,n){console.log(e,n)}},{key:"render",value:function(){return this.state.hasError?Object(m.jsx)("h1",{children:"Something went wrong."}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){if(e)return console.log(e),{hasError:!0}}}]),t}(j.Component),fe=Object(ue.deepMerge)(oe.dark,{global:{drop:{background:"#444444",shadowSize:"medium",extend:"\n          border-bottom-left-radius: 12px;\n          border-bottom-right-radius: 12px;\n          overflow: hidden;\n        "},elevation:{dark:{medium:"0 10px 20px rgba(0,0,0,0.19), 0 6px 6px rgba(0,0,0,0.23)"},light:{medium:"0 10px 20px rgba(0,0,0,0.19), 0 6px 6px rgba(0,0,0,0.23)"}},font:{size:"14px",family:"Sora"},input:{weight:400}}});Object(f.render)(Object(m.jsx)(je,{children:Object(m.jsx)(p.a,{full:!0,theme:fe,children:Object(m.jsxs)(w,{children:[Object(m.jsx)(ie,{}),Object(m.jsx)(Y,{})]})})}),document.getElementById("root"))}},[[129,1,2]]]);
//# sourceMappingURL=main.101338fa.chunk.js.map